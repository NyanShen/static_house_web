<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地图找房</title>
    <link rel="stylesheet" type="text/css" href="//static.fczx.com/www/css/_common.css">
    <link rel="stylesheet" type="text/css" href="//static.fczx.com/www/css/module/map-search.css">

    <script type="text/javascript" src="//static.fczx.com/www/js/lib/jquery.min.js"></script>
    <script type="text/javascript" src="//static.fczx.com/www/js/common/app.js"></script>
    <script type="text/javascript" src="//static.fczx.com/www/js/common/index.js"></script>
    <script type="text/javascript" src="//static.fczx.com/www/js/common/msg-modal.js"></script>
    <script type="text/javascript" src="//static.fczx.com/www/js/common/map-search.js"></script>
    <script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=kM1RFA6AzOnv6lmlc7qyOMhqBILu1pgk"></script>
    <script type="text/javascript" src="//api.map.baidu.com/library/GeoUtils/1.2/src/GeoUtils.js"></script>
    <script type="text/javascript" src="//api.map.baidu.com/library/InfoBox/1.2/src/InfoBox_min.js"></script>

    <style>
        .circle-bubble {
            margin-top: 25px;
            text-align: center;
            color: #fff;
        }

        .circle-bubble .name {
            font-size: 14px;
            font-weight: bold;
        }

        .circle-bubble .count {
            margin-top: 5px;
            font-size: 12px;
        }


        .house-bubble {
            display: block;
            position: relative;
            height: 30px;
            line-height: 30px;
            padding: 0 10px;
            text-align: center;
            color: #fff;
        }

        .house-bubble .triangle-down {
            position: absolute;
            left: 40%;
            border-width: 8px;
            border-style: solid;
            border-color: #11a43c transparent transparent transparent;
            opacity: .9;
        }

        .house-bubble:hover .triangle-down {
            border-color: #f60 transparent transparent transparent;
        }

        .house-bubble .price {
            font-weight: bold;
        }

        .house-bubble em {
            padding: 0 10px;
            color: #ccc;
        }
    </style>
</head>

<body>
    <div class="main-nav">
        <div class="nav-content clearfix">
            <div class="nav-left fl clearfix">
                <div class="nav-item">
                    <a href="/" class="nav-logo">房产在线<small>Fczx.com</small></a>
                </div>
                <div class="nav-item nav-city">
                    <a href="javascript:void(0);" class="city-name">襄阳</a>
                </div>
                <div class="nav-item">
                    <ul class="nav-list">
                        <li><a href="/">首页</a></li>
                        <li><a href="/pages/building/list.html" target="_blank">新房</a></li>
                        <li><a>二手房</a></li>
                        <li><a>租房</a></li>
                        <li><a href="/pages/consult" target="_blank">资讯</a></li>
                        <li><a href="/pages/knowledge" target="_blank">知识</a></li>
                        <li><a href="/pages/qa" target="_blank">问答</a></li>
                    </ul>
                </div>
            </div>
            <div class="nav-right fr">
                <div class="nav-item login-link hide" id="loginLink">
                    <ul>
                        <li>
                            <a href="/pages/login" class="login-btn">登录</a>
                        </li>
                        <li>
                            <a href="/pages/login/register.html" class="login-btn">注册</a>
                        </li>
                    </ul>
                </div>
                <div class="login-user" id="loginUser">
                    <div class="nav-item">
                        <a href="/pages/user/index.html" class="login-btn">Nyan</a>
                    </div>
                    <div class="user-center">
                        <span class="triangle-up"></span>
                        <a href="">我的消息</a>
                        <a href="">我的回答</a>
                        <a href="">看房记录</a>
                        <a href="" class="logout">退出</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="box-map-search">
        <div class="map-search-menu clearfix">
            <div class="menu-list fl">
                <div class="menu-item">
                    <div class="item-select">
                        <span class="item-name">区域</span>
                        <i class="item-icon"></i>
                    </div>
                    <ul class="item-select-list">
                        <li>全部</li>
                        <li>樊城区</li>
                        <li>襄城区</li>
                        <li>襄州区</li>
                        <li>高新区</li>
                        <li>宜城</li>
                        <li>老河口</li>
                        <li>东津</li>
                    </ul>
                </div>
                <div class="menu-item">
                    <div class="item-select">
                        <span class="item-name">户型</span>
                        <i class="item-icon"></i>
                    </div>
                    <ul class="item-select-list">
                        <li>全部</li>
                        <li>一室</li>
                        <li>二室</li>
                        <li>三室</li>
                        <li>四室</li>
                        <li>五室</li>
                        <li>五室以上</li>
                    </ul>
                </div>
                <div class="menu-item">
                    <div class="item-select">
                        <span class="item-name">面积</span>
                        <i class="item-icon"></i>
                    </div>
                    <ul class="item-select-list">
                        <li>全部</li>
                        <li>50平米以下</li>
                        <li>50-70平米</li>
                        <li>70-90平米</li>
                        <li>90-110平米</li>
                        <li>110-130平米</li>
                        <li>130-150平米</li>
                        <li>150-200平米</li>
                        <li>200-300平米</li>
                        <li>300平米以上</li>
                    </ul>
                </div>
                <div class="menu-item">
                    <div class="item-select">
                        <span class="item-name">类型</span>
                        <i class="item-icon"></i>
                    </div>
                    <ul class="item-select-list">
                        <li>全部</li>
                        <li>住宅</li>
                        <li>别墅</li>
                        <li>商住</li>
                        <li>商铺</li>
                        <li>写字楼</li>
                    </ul>
                </div>
                <div class="menu-item">
                    <div class="item-select">
                        <span class="item-name">预算</span>
                        <i class="item-icon"></i>
                    </div>
                    <ul class="item-select-list">
                        <li>全部</li>
                        <li>30万以下</li>
                        <li>30-50万</li>
                        <li>50-100万</li>
                        <li>100-200万</li>
                        <li>300万以上</li>
                    </ul>
                </div>
            </div>
            <div class="switch-list fr">
                <a href="javascript:void(0);" class="switch-name">列表</a>
                <ul class="item-select-list">
                    <li><a href="/pages/building/list.html">新房</a></li>
                </ul>
            </div>
        </div>
        <div class="map-search-content">
            <div class="map-container" id="mapContainer"></div>
            <div class="map-list-wrap">
                <div class="fold-btn">
                    <i class="open"></i>
                </div>
                <div class="map-list-content">
                    <ul class="map-list">
                        <li>
                            <div class="mli-item clearfix">
                                <div class="mli-img fl">
                                    <a href="javascript:void(0);">
                                        <img src="//static.fczx.com/www/assets/images/200x150.jpg" alt="">
                                    </a>
                                </div>
                                <div class="mli-detail fl">
                                    <div class="house-name">
                                        <a href="javascript:void(0);">金隅上城郡</a>
                                    </div>
                                    <div class="house-price">
                                        <span>800万元/套</span>
                                    </div>
                                    <div class="house-type">
                                        <span>
                                            一居<em> | </em>
                                            二居
                                        </span>
                                        <span>118-140㎡</span>
                                    </div>
                                    <div class="house-tags">
                                        <span>在售</span>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="map-list-empty">
                    <div class="empty-content">
                        <img src="//static.fczx.com/www/assets/icons/house_empty.png" alt="">
                        <p class="empty-text">很抱歉，没有找到符合条件的房源信息！</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    $(document).ready(function () {
        // app.request({
        //     url: app.areaApiUrl('/house/area-house-count'),
        //     data: {},
        //     type: 'GET',
        //     dataType: 'json',
        //     headers: {},
        //     done: function (res) {

        //     }
        // });
        setContentHeight();
        function setContentHeight() {
            let clientHeight = $(document).height();
            $('.map-search-content').css('height', `${clientHeight - 100}px`);
        }

        $(window).resize(function () {
            setContentHeight();
        });

        $('.fold-btn').click(function () {
            if ($('.fold-btn i').hasClass('open')) {
                $(this).css('left', 0);
                $('.fold-btn i').removeClass('open');
                $('.fold-btn i').addClass('close');
                $('.map-list-content').hide();
            } else {
                $(this).css('left', '380px');
                $('.fold-btn i').removeClass('close');
                $('.fold-btn i').addClass('open');
                $('.map-list-content').show();
            }
        });

        let lng = 112.129108;
        let lat = 32.015532;
        // 初始化数据根据窗口地图可显示区域获取区域列表
        let dataSource = {
            gather_regions: [
                { "name": "樊城区", "longitude": "112.146049", "latitude": "32.051797", "count": "2" },
                { "name": "襄州区", "longitude": "112.328604", "latitude": "32.207599", "count": "7" },
                { "name": "谷城县", "longitude": "111.477729", "latitude": "32.125439", "count": "3" },
                { "name": "老河口市", "longitude": "111.774385", "latitude": "32.416571", "count": "3" },
                { "name": "宜城", "longitude": "112.264608", "latitude": "31.726207", "count": "3" },
                { "name": "保康", "longitude": "110.939608", "latitude": "31.905982", "count": "3" },
                { "name": "枣阳", "longitude": "112.778475", "latitude": "32.136441", "count": "3" },
            ],
            label_rows: [
                {
                    "house_id": "1001",
                    "house_name": "襄阳万达广场",
                    "longitude": "112.139804",
                    "latitude": "32.068105",
                    "price": "80",
                    "price_unit": '万/套',
                    "house_link": "http://xiangyang.fczx.com/pages/building/index.html",
                    "image_path": "http://static.fczx.com/www/assets/images/1400x933_1.jpg",
                    "tags": "大户型,高层",
                    "sale_status": "1",
                    "region_name": "樊城区",
                    "sub_region_name": "",
                    "address": "襄阳市樊城区高新区长虹北路9号"
                },
                {
                    "house_id": "1002",
                    "house_name": "襄阳吾悦广场",
                    "longitude": "112.140691",
                    "latitude": "32.097841",
                    "price": "12000",
                    "price_unit": '元/㎡',
                    "house_link": "http://xiangyang.fczx.com/pages/building/index.html",
                    "image_path": "http://static.fczx.com/www/assets/images/1400x933_1.jpg",
                    "tags": "大户型,小高层",
                    "sale_status": "1",
                    "region_name": "樊城区",
                    "sub_region_name": "",
                    "address": "襄阳市樊城区团山大道与邓城大道交叉口北150米"
                }
            ]
        }
        new FCZX.map.SearchMap({ lng, lat }, dataSource)
    })
</script>

</html>